<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Converter - CalcHub</title>
    <meta name="description" content="Convert between 170+ world currencies with real-time exchange rates. Fast, accurate, and easy-to-use currency conversion calculator.">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6366f1;
            --primary-hover: #5855eb;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --radius: 0.75rem;
            --transition: all 0.2s ease-in-out;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }

        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: #475569;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .header {
            background-color: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .nav-brand i {
            font-size: 1.75rem;
        }

        .nav-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .back-btn {
            background: none;
            border: 2px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background-color: var(--bg-secondary);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .theme-toggle {
            background: none;
            border: 2px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.5rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
        }

        .theme-toggle:hover {
            background-color: var(--bg-secondary);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .main {
            padding: 2rem 0;
            min-height: calc(100vh - 200px);
        }

        .calculator-page {
            max-width: 900px;
            margin: 0 auto;
        }

        .calculator-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .calculator-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .calculator-title i {
            color: var(--primary-color);
        }

        .calculator-description {
            font-size: 1.125rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .converter-container {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .converter-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1.5rem;
            align-items: end;
            margin-bottom: 2rem;
        }

        .currency-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .currency-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .currency-input-wrapper {
            display: flex;
            gap: 0.5rem;
        }

        .amount-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1.25rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .amount-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgb(99 102 241 / 0.1);
        }

        .currency-select {
            min-width: 140px;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .currency-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgb(99 102 241 / 0.1);
        }

        .swap-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 3rem;
            height: 3rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .swap-btn:hover {
            background-color: var(--primary-hover);
            transform: rotate(180deg);
        }

        .rate-info {
            background-color: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 1rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .rate-text {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .rate-value {
            color: var(--primary-color);
            font-size: 1.125rem;
            font-weight: 600;
        }

        .quick-amounts {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .quick-amount-btn {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: calc(var(--radius) - 0.25rem);
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-primary);
        }

        .quick-amount-btn:hover {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .popular-currencies {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .popular-currency-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .popular-currency-card:hover {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .popular-currency-card:hover .currency-code,
        .popular-currency-card:hover .currency-name,
        .popular-currency-card:hover .currency-rate {
            color: white;
        }

        .currency-code {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }

        .currency-name {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .currency-rate {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .historical-section {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .historical-section h3 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .historical-rates {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .historical-rate-item {
            background-color: var(--bg-secondary);
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
        }

        .historical-rate-period {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .historical-rate-value {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .conversion-history {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .conversion-history h3 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: var(--bg-secondary);
            border-radius: var(--radius);
        }

        .history-conversion {
            font-weight: 500;
            color: var(--text-primary);
        }

        .history-time {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .clear-history-btn {
            background-color: var(--error-color);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
        }

        .clear-history-btn:hover {
            background-color: #dc2626;
        }

                .loading {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            background-color: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            display: none;
        }

        [data-theme="dark"] .error-message {
            background-color: #450a0a;
            border-color: #7f1d1d;
            color: #fca5a5;
        }

        .footer {
            background-color: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: 2rem 0;
            margin-top: 2rem;
        }

        .footer-content {
            text-align: center;
        }

        .footer-brand {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .footer-text {
            color: var(--text-secondary);
        }

        @media (max-width: 768px) {
            .converter-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .swap-btn {
                justify-self: center;
                transform: rotate(90deg);
            }
            
            .swap-btn:hover {
                transform: rotate(270deg);
            }
            
            .calculator-title {
                font-size: 2rem;
            }
            
            .currency-input-wrapper {
                flex-direction: column;
            }
            
            .popular-currencies {
                grid-template-columns: 1fr;
            }
            
            .historical-rates {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .quick-amounts {
                justify-content: center;
            }
            
            .historical-rates {
                grid-template-columns: 1fr;
            }
            
            .history-item {
                flex-direction: column;
                text-align: center;
                gap: 0.5rem;
            }
        }

        * {
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav container">
            <a href="../../index.html" class="nav-brand">
                <i class="fas fa-calculator"></i>
                <span>CalcHub</span>
            </a>
            <div class="nav-actions">
                <a href="../../index.html" class="back-btn">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back to Home</span>
                </a>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </nav>
    </header>

    <main class="main container">
        <div class="calculator-page">
            <div class="calculator-header">
                <h1 class="calculator-title">
                    <i class="fas fa-exchange-alt"></i>
                    Currency Converter
                </h1>
                <p class="calculator-description">
                    Convert between 170+ world currencies with real-time exchange rates. Fast, accurate, and easy-to-use currency conversion calculator.
                </p>
            </div>

            <div class="error-message" id="errorMessage"></div>

            <div class="converter-container">
                <div class="converter-row">
                    <div class="currency-input-group">
                        <label class="currency-label">From</label>
                        <div class="currency-input-wrapper">
                            <input type="number" id="fromAmount" class="amount-input" placeholder="1.00" value="1" min="0" step="0.01">
                            <select id="fromCurrency" class="currency-select">
                                <option value="USD">USD</option>
                            </select>
                        </div>
                    </div>

                    <button class="swap-btn" id="swapBtn" onclick="swapCurrencies()" title="Swap currencies">
                        <i class="fas fa-exchange-alt"></i>
                    </button>

                    <div class="currency-input-group">
                        <label class="currency-label">To</label>
                        <div class="currency-input-wrapper">
                            <input type="number" id="toAmount" class="amount-input" placeholder="0.00" readonly>
                            <select id="toCurrency" class="currency-select">
                                <option value="EUR">EUR</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="rate-info" id="rateInfo">
                    <div class="rate-text">Exchange Rate</div>
                    <div class="rate-value" id="rateValue">Loading...</div>
                </div>

                <div class="quick-amounts">
                    <button class="quick-amount-btn" onclick="setAmount(1)">1</button>
                    <button class="quick-amount-btn" onclick="setAmount(5)">5</button>
                    <button class="quick-amount-btn" onclick="setAmount(10)">10</button>
                    <button class="quick-amount-btn" onclick="setAmount(25)">25</button>
                    <button class="quick-amount-btn" onclick="setAmount(50)">50</button>
                    <button class="quick-amount-btn" onclick="setAmount(100)">100</button>
                    <button class="quick-amount-btn" onclick="setAmount(500)">500</button>
                    <button class="quick-amount-btn" onclick="setAmount(1000)">1,000</button>
                </div>

                <div class="popular-currencies" id="popularCurrencies">
                    <!-- Popular currencies will be populated here -->
                </div>
            </div>

            <div class="historical-section">
                <h3>
                    <i class="fas fa-chart-line"></i>
                    Historical Rates
                </h3>
                <div class="historical-rates" id="historicalRates">
                    <!-- Historical rates will be populated here -->
                </div>
            </div>

            <div class="conversion-history">
                <h3>
                    <i class="fas fa-history"></i>
                    Recent Conversions
                </h3>
                <div class="history-list" id="historyList">
                    <div style="text-align: center; color: var(--text-muted); padding: 2rem;">
                        No conversions yet
                    </div>
                </div>
                <button class="clear-history-btn" onclick="clearHistory()" style="display: none;" id="clearHistoryBtn">
                    Clear History
                </button>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <i class="fas fa-calculator"></i>
                    <span>CalcHub</span>
                </div>
                <p class="footer-text">Your ultimate destination for professional calculators</p>
            </div>
        </div>
    </footer>

    <script>
        // Theme Management
        class ThemeManager {
            constructor() {
                this.theme = localStorage.getItem('theme') || 'light';
                this.themeToggle = document.getElementById('themeToggle');
                this.init();
            }

            init() {
                this.setTheme(this.theme);
                this.themeToggle.addEventListener('click', () => this.toggleTheme());
            }

            setTheme(theme) {
                this.theme = theme;
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                this.updateThemeIcon();
            }

            toggleTheme() {
                const newTheme = this.theme === 'light' ? 'dark' : 'light';
                this.setTheme(newTheme);
            }

            updateThemeIcon() {
                const icon = this.themeToggle.querySelector('i');
                if (this.theme === 'dark') {
                    icon.className = 'fas fa-sun';
                } else {
                    icon.className = 'fas fa-moon';
                }
            }
        }

        // Complete currency data with all 170+ currencies
        const currencyData = {
            'USD': { name: 'US Dollar', symbol: '$' },
            'AED': { name: 'UAE Dirham', symbol: 'د.إ' },
            'AFN': { name: 'Afghan Afghani', symbol: '؋' },
            'ALL': { name: 'Albanian Lek', symbol: 'L' },
            'AMD': { name: 'Armenian Dram', symbol: '֏' },
            'ANG': { name: 'Netherlands Antillean Guilder', symbol: 'ƒ' },
            'AOA': { name: 'Angolan Kwanza', symbol: 'Kz' },
            'ARS': { name: 'Argentine Peso', symbol: '$' },
            'AUD': { name: 'Australian Dollar', symbol: 'A$' },
            'AWG': { name: 'Aruban Florin', symbol: 'ƒ' },
            'AZN': { name: 'Azerbaijani Manat', symbol: '₼' },
            'BAM': { name: 'Bosnia-Herzegovina Convertible Mark', symbol: 'KM' },
            'BBD': { name: 'Barbadian Dollar', symbol: '$' },
            'BDT': { name: 'Bangladeshi Taka', symbol: '৳' },
            'BGN': { name: 'Bulgarian Lev', symbol: 'лв' },
            'BHD': { name: 'Bahraini Dinar', symbol: '.د.ب' },
            'BIF': { name: 'Burundian Franc', symbol: 'FBu' },
            'BMD': { name: 'Bermudan Dollar', symbol: '$' },
            'BND': { name: 'Brunei Dollar', symbol: '$' },
            'BOB': { name: 'Bolivian Boliviano', symbol: '$b' },
            'BRL': { name: 'Brazilian Real', symbol: 'R$' },
            'BSD': { name: 'Bahamian Dollar', symbol: '$' },
            'BTN': { name: 'Bhutanese Ngultrum', symbol: 'Nu.' },
            'BWP': { name: 'Botswanan Pula', symbol: 'P' },
            'BYN': { name: 'Belarusian Ruble', symbol: 'Br' },
            'BZD': { name: 'Belize Dollar', symbol: 'BZ$' },
            'CAD': { name: 'Canadian Dollar', symbol: 'C$' },
            'CDF': { name: 'Congolese Franc', symbol: 'FC' },
            'CHF': { name: 'Swiss Franc', symbol: 'CHF' },
            'CLP': { name: 'Chilean Peso', symbol: '$' },
            'CNY': { name: 'Chinese Yuan', symbol: '¥' },
            'COP': { name: 'Colombian Peso', symbol: '$' },
            'CRC': { name: 'Costa Rican Colón', symbol: '₡' },
            'CUP': { name: 'Cuban Peso', symbol: '₱' },
            'CVE': { name: 'Cape Verdean Escudo', symbol: '$' },
            'CZK': { name: 'Czech Republic Koruna', symbol: 'Kč' },
            'DJF': { name: 'Djiboutian Franc', symbol: 'Fdj' },
            'DKK': { name: 'Danish Krone', symbol: 'kr' },
            'DOP': { name: 'Dominican Peso', symbol: 'RD$' },
            'DZD': { name: 'Algerian Dinar', symbol: 'دج' },
            'EGP': { name: 'Egyptian Pound', symbol: '£' },
            'ERN': { name: 'Eritrean Nakfa', symbol: 'Nfk' },
            'ETB': { name: 'Ethiopian Birr', symbol: 'Br' },
            'EUR': { name: 'Euro', symbol: '€' },
            'FJD': { name: 'Fijian Dollar', symbol: '$' },
            'FKP': { name: 'Falkland Islands Pound', symbol: '£' },
            'FOK': { name: 'Faroese Króna', symbol: 'kr' },
            'GBP': { name: 'British Pound Sterling', symbol: '£' },
            'GEL': { name: 'Georgian Lari', symbol: '₾' },
            'GGP': { name: 'Guernsey Pound', symbol: '£' },
            'GHS': { name: 'Ghanaian Cedi', symbol: '¢' },
            'GIP': { name: 'Gibraltar Pound', symbol: '£' },
            'GMD': { name: 'Gambian Dalasi', symbol: 'D' },
            'GNF': { name: 'Guinean Franc', symbol: 'FG' },
            'GTQ': { name: 'Guatemalan Quetzal', symbol: 'Q' },
            'GYD': { name: 'Guyanaese Dollar', symbol: '$' },
            'HKD': { name: 'Hong Kong Dollar', symbol: 'HK$' },
            'HNL': { name: 'Honduran Lempira', symbol: 'L' },
            'HRK': { name: 'Croatian Kuna', symbol: 'kn' },
            'HTG': { name: 'Haitian Gourde', symbol: 'G' },
            'HUF': { name: 'Hungarian Forint', symbol: 'Ft' },
            'IDR': { name: 'Indonesian Rupiah', symbol: 'Rp' },
            'ILS': { name: 'Israeli New Sheqel', symbol: '₪' },
            'IMP': { name: 'Manx pound', symbol: '£' },
            'INR': { name: 'Indian Rupee', symbol: '₹' },
                        'IQD': { name: 'Iraqi Dinar', symbol: 'ع.د' },
            'IRR': { name: 'Iranian Rial', symbol: '﷼' },
            'ISK': { name: 'Icelandic Króna', symbol: 'kr' },
            'JEP': { name: 'Jersey Pound', symbol: '£' },
            'JMD': { name: 'Jamaican Dollar', symbol: 'J$' },
            'JOD': { name: 'Jordanian Dinar', symbol: 'JD' },
            'JPY': { name: 'Japanese Yen', symbol: '¥' },
            'KES': { name: 'Kenyan Shilling', symbol: 'KSh' },
            'KGS': { name: 'Kyrgystani Som', symbol: 'лв' },
            'KHR': { name: 'Cambodian Riel', symbol: '៛' },
            'KID': { name: 'Kiribati Dollar', symbol: '$' },
            'KMF': { name: 'Comorian Franc', symbol: 'CF' },
            'KRW': { name: 'South Korean Won', symbol: '₩' },
            'KWD': { name: 'Kuwaiti Dinar', symbol: 'KD' },
            'KYD': { name: 'Cayman Islands Dollar', symbol: '$' },
            'KZT': { name: 'Kazakhstani Tenge', symbol: '₸' },
            'LAK': { name: 'Laotian Kip', symbol: '₭' },
            'LBP': { name: 'Lebanese Pound', symbol: '£' },
            'LKR': { name: 'Sri Lankan Rupee', symbol: '₨' },
            'LRD': { name: 'Liberian Dollar', symbol: '$' },
            'LSL': { name: 'Lesotho Loti', symbol: 'M' },
            'LYD': { name: 'Libyan Dinar', symbol: 'LD' },
            'MAD': { name: 'Moroccan Dirham', symbol: 'MAD' },
            'MDL': { name: 'Moldovan Leu', symbol: 'lei' },
            'MGA': { name: 'Malagasy Ariary', symbol: 'Ar' },
            'MKD': { name: 'Macedonian Denar', symbol: 'ден' },
            'MMK': { name: 'Myanma Kyat', symbol: 'K' },
            'MNT': { name: 'Mongolian Tugrik', symbol: '₮' },
            'MOP': { name: 'Macanese Pataca', symbol: 'MOP$' },
            'MRU': { name: 'Mauritanian Ouguiya', symbol: 'UM' },
            'MUR': { name: 'Mauritian Rupee', symbol: '₨' },
            'MVR': { name: 'Maldivian Rufiyaa', symbol: 'Rf' },
            'MWK': { name: 'Malawian Kwacha', symbol: 'MK' },
            'MXN': { name: 'Mexican Peso', symbol: '$' },
            'MYR': { name: 'Malaysian Ringgit', symbol: 'RM' },
            'MZN': { name: 'Mozambican Metical', symbol: 'MT' },
            'NAD': { name: 'Namibian Dollar', symbol: '$' },
            'NGN': { name: 'Nigerian Naira', symbol: '₦' },
            'NIO': { name: 'Nicaraguan Córdoba', symbol: 'C$' },
            'NOK': { name: 'Norwegian Krone', symbol: 'kr' },
            'NPR': { name: 'Nepalese Rupee', symbol: '₨' },
            'NZD': { name: 'New Zealand Dollar', symbol: 'NZ$' },
            'OMR': { name: 'Omani Rial', symbol: '﷼' },
            'PAB': { name: 'Panamanian Balboa', symbol: 'B/.' },
            'PEN': { name: 'Peruvian Nuevo Sol', symbol: 'S/.' },
            'PGK': { name: 'Papua New Guinean Kina', symbol: 'K' },
            'PHP': { name: 'Philippine Peso', symbol: '₱' },
            'PKR': { name: 'Pakistani Rupee', symbol: '₨' },
            'PLN': { name: 'Polish Zloty', symbol: 'zł' },
            'PYG': { name: 'Paraguayan Guarani', symbol: 'Gs' },
            'QAR': { name: 'Qatari Rial', symbol: '﷼' },
            'RON': { name: 'Romanian Leu', symbol: 'lei' },
            'RSD': { name: 'Serbian Dinar', symbol: 'Дин.' },
            'RUB': { name: 'Russian Ruble', symbol: '₽' },
            'RWF': { name: 'Rwandan Franc', symbol: 'R₣' },
            'SAR': { name: 'Saudi Riyal', symbol: '﷼' },
            'SBD': { name: 'Solomon Islands Dollar', symbol: '$' },
            'SCR': { name: 'Seychellois Rupee', symbol: '₨' },
            'SDG': { name: 'Sudanese Pound', symbol: 'ج.س.' },
            'SEK': { name: 'Swedish Krona', symbol: 'kr' },
            'SGD': { name: 'Singapore Dollar', symbol: 'S$' },
            'SHP': { name: 'Saint Helena Pound', symbol: '£' },
            'SLE': { name: 'Sierra Leonean Leone', symbol: 'Le' },
            'SLL': { name: 'Sierra Leonean Leone (Old)', symbol: 'Le' },
            'SOS': { name: 'Somali Shilling', symbol: 'S' },
            'SRD': { name: 'Surinamese Dollar', symbol: '$' },
            'SSP': { name: 'South Sudanese Pound', symbol: '£' },
            'STN': { name: 'São Tomé and Príncipe Dobra', symbol: 'Db' },
            'SYP': { name: 'Syrian Pound', symbol: '£' },
            'SZL': { name: 'Swazi Lilangeni', symbol: 'E' },
            'THB': { name: 'Thai Baht', symbol: '฿' },
            'TJS': { name: 'Tajikistani Somoni', symbol: 'SM' },
            'TMT': { name: 'Turkmenistani Manat', symbol: 'T' },
            'TND': { name: 'Tunisian Dinar', symbol: 'د.ت' },
            'TOP': { name: 'Tongan Paʻanga', symbol: 'T$' },
            'TRY': { name: 'Turkish Lira', symbol: '₺' },
            'TTD': { name: 'Trinidad and Tobago Dollar', symbol: 'TT$' },
            'TVD': { name: 'Tuvaluan Dollar', symbol: '$' },
            'TWD': { name: 'New Taiwan Dollar', symbol: 'NT$' },
            'TZS': { name: 'Tanzanian Shilling', symbol: 'TSh' },
            'UAH': { name: 'Ukrainian Hryvnia', symbol: '₴' },
            'UGX': { name: 'Ugandan Shilling', symbol: 'USh' },
            'UYU': { name: 'Uruguayan Peso', symbol: '$U' },
            'UZS': { name: 'Uzbekistan Som', symbol: 'лв' },
            'VES': { name: 'Venezuelan Bolívar', symbol: 'Bs' },
            'VND': { name: 'Vietnamese Dong', symbol: '₫' },
            'VUV': { name: 'Vanuatu Vatu', symbol: 'VT' },
            'WST': { name: 'Samoan Tala', symbol: 'WS$' },
            'XAF': { name: 'CFA Franc BEAC', symbol: 'FCFA' },
            'XCD': { name: 'East Caribbean Dollar', symbol: '$' },
            'XCG': { name: 'Caribbean Guilder', symbol: 'ƒ' },
            'XDR': { name: 'Special Drawing Rights', symbol: 'SDR' },
            'XOF': { name: 'CFA Franc BCEAO', symbol: 'CFA' },
            'XPF': { name: 'CFP Franc', symbol: '₣' },
            'YER': { name: 'Yemeni Rial', symbol: '﷼' },
            'ZAR': { name: 'South African Rand', symbol: 'R' },
            'ZMW': { name: 'Zambian Kwacha', symbol: 'ZK' },
            'ZWL': { name: 'Zimbabwean Dollar', symbol: 'Z$' }
        };

        // Currency data and exchange rates
        let exchangeRates = {};
        let conversionHistory = JSON.parse(localStorage.getItem('conversionHistory')) || [];

        // Popular currencies for quick access
        const popularCurrencies = [
            'USD', 'EUR', 'GBP', 'JPY', 'AUD', 'CAD', 'CHF', 'CNY', 'SEK', 'NZD', 'MXN', 'SGD'
        ];

        function initializeCurrencyConverter() {
            populateCurrencySelects();
            populatePopularCurrencies();
            loadExchangeRates();
            loadConversionHistory();
            setupEventListeners();
        }

        function populateCurrencySelects() {
            const fromSelect = document.getElementById('fromCurrency');
            const toSelect = document.getElementById('toCurrency');
            
            // Clear existing options
            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';
            
            // Add currency options
            Object.keys(currencyData).sort().forEach(code => {
                const option1 = new Option(`${code} - ${currencyData[code].name}`, code);
                const option2 = new Option(`${code} - ${currencyData[code].name}`, code);
                
                fromSelect.appendChild(option1);
                toSelect.appendChild(option2);
            });
            
            // Set default values
            fromSelect.value = 'USD';
            toSelect.value = 'EUR';
        }

        function populatePopularCurrencies() {
            const container = document.getElementById('popularCurrencies');
            container.innerHTML = '';
            
            popularCurrencies.forEach(code => {
                if (currencyData[code]) {
                    const card = document.createElement('div');
                    card.className = 'popular-currency-card';
                    card.onclick = () => selectPopularCurrency(code);
                    
                    card.innerHTML = `
                        <div class="currency-code">${code}</div>
                        <div class="currency-name">${currencyData[code].name}</div>
                        <div class="currency-rate" id="rate-${code}">Loading...</div>
                    `;
                    
                    container.appendChild(card);
                }
            });
        }

        async function loadExchangeRates() {
            try {
                showLoading(true);
                
                // Using ExchangeRate-API (free tier: 1500 requests/month)
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                
                if (!response.ok) {
                    throw new Error('Failed to fetch exchange rates');
                }
                
                const data = await response.json();
                exchangeRates = data.rates;
                
                // Add USD as base currency
                exchangeRates.USD = 1;
                
                updatePopularCurrencyRates();
                convertCurrency();
                updateHistoricalRates();
                hideError();
                
            } catch (error) {
                console.error('Error loading exchange rates:', error);
                showError('Unable to load current exchange rates. Using cached rates if available.');
                
                // Fallback to mock data based on the provided rates
                exchangeRates = {
                    "USD": 1,
                    "AED": 3.67,
                    "AFN": 69.55,
                    "ALL": 85.11,
                    "AMD": 383.39,
                    "ANG": 1.79,
                    "AOA": 918.37,
                    "ARS": 1185.5,
                    "AUD": 1.53,
                    "AWG": 1.79,
                    "AZN": 1.7,
                    "BAM": 1.69,
                    "BBD": 2,
                    "BDT": 122.17,
                    "BGN": 1.69,
                    "BHD": 0.376,
                    "BIF": 2971.75,
                    "BMD": 1,
                    "BND": 1.28,
                    "BOB": 6.92,
                    "BRL": 5.54,
                    "BSD": 1,
                    "BTN": 85.59,
                    "BWP": 13.37,
                    "BYN": 3.27,
                    "BZD": 2,
                    "CAD": 1.36,
                    "CDF": 2886.44,
                    "CHF": 0.812,
                    "CLP": 933.65,
                    "CNY": 7.18,
                    "COP": 4186.17,
                    "CRC": 506.58,
                    "CUP": 24,
                    "CVE": 95.23,
                    "CZK": 21.39,
                    "DJF": 177.72,
                    "DKK": 6.44,
                    "DOP": 59.02,
                    "DZD": 130.9,
                    "EGP": 49.76,
                    "ERN": 15,
                    "ETB": 134.88,
                    "EUR": 0.864,
                    "FJD": 2.24,
                    "FKP": 0.735,
                    "FOK": 6.44,
                    "GBP": 0.735,
                    "GEL": 2.73,
                    "GGP": 0.735,
                    "GHS": 10.81,
                    "GIP": 0.735,
                    "GMD": 72.73,
                    "GNF": 8687.55,
                    "GTQ": 7.68,
                    "GYD": 209.28,
                                        "HKD": 7.85,
                    "HNL": 26.05,
                    "HRK": 6.51,
                    "HTG": 130.99,
                    "HUF": 346.29,
                    "IDR": 16225.91,
                    "ILS": 3.56,
                    "IMP": 0.735,
                    "INR": 85.59,
                    "IQD": 1307.67,
                    "IRR": 41954.76,
                    "ISK": 124.34,
                    "JEP": 0.735,
                    "JMD": 159.26,
                    "JOD": 0.709,
                    "JPY": 143.51,
                    "KES": 129.07,
                    "KGS": 87.39,
                    "KHR": 4017.11,
                    "KID": 1.53,
                    "KMF": 424.88,
                    "KRW": 1354.93,
                    "KWD": 0.306,
                    "KYD": 0.833,
                    "KZT": 511.63,
                    "LAK": 21653.34,
                    "LBP": 89500,
                    "LKR": 298.66,
                    "LRD": 199.55,
                    "LSL": 17.78,
                    "LYD": 5.46,
                    "MAD": 9.1,
                    "MDL": 17.2,
                    "MGA": 4499.89,
                    "MKD": 53.87,
                    "MMK": 2095.72,
                    "MNT": 3569.25,
                    "MOP": 8.09,
                    "MRU": 39.68,
                    "MUR": 45.46,
                    "MVR": 15.42,
                    "MWK": 1738.85,
                    "MXN": 18.9,
                    "MYR": 4.22,
                    "MZN": 63.88,
                    "NAD": 17.78,
                    "NGN": 1536.07,
                    "NIO": 36.73,
                    "NOK": 9.94,
                    "NPR": 136.95,
                    "NZD": 1.65,
                    "OMR": 0.384,
                    "PAB": 1,
                    "PEN": 3.62,
                    "PGK": 4.15,
                    "PHP": 55.73,
                    "PKR": 282.28,
                    "PLN": 3.68,
                    "PYG": 8001.95,
                    "QAR": 3.64,
                    "RON": 4.34,
                    "RSD": 101.29,
                    "RUB": 79.81,
                    "RWF": 1436.02,
                    "SAR": 3.75,
                    "SBD": 8.56,
                    "SCR": 14.84,
                    "SDG": 510.86,
                    "SEK": 9.44,
                    "SGD": 1.28,
                    "SHP": 0.735,
                    "SLE": 22.37,
                    "SLL": 22367.4,
                    "SOS": 570.76,
                    "SRD": 37.32,
                    "SSP": 4634.09,
                    "STN": 21.16,
                    "SYP": 12892.79,
                    "SZL": 17.78,
                    "THB": 32.4,
                    "TJS": 10.06,
                    "TMT": 3.5,
                    "TND": 2.93,
                    "TOP": 2.35,
                    "TRY": 39.39,
                    "TTD": 6.77,
                    "TVD": 1.53,
                    "TWD": 29.37,
                    "TZS": 2582.23,
                    "UAH": 41.53,
                    "UGX": 3594.84,
                    "UYU": 41.24,
                    "UZS": 12703.34,
                    "VES": 101.08,
                    "VND": 26033.8,
                    "VUV": 119.09,
                    "WST": 2.74,
                    "XAF": 566.51,
                    "XCD": 2.7,
                    "XCG": 1.79,
                    "XDR": 0.728,
                    "XOF": 566.51,
                    "XPF": 103.06,
                    "YER": 243,
                    "ZAR": 17.78,
                    "ZMW": 24.82,
                    "ZWL": 6.97
                };
                
                updatePopularCurrencyRates();
                convertCurrency();
            } finally {
                showLoading(false);
            }
        }

        function updatePopularCurrencyRates() {
            popularCurrencies.forEach(code => {
                const rateElement = document.getElementById(`rate-${code}`);
                if (rateElement && exchangeRates[code]) {
                    const rate = exchangeRates[code];
                    rateElement.textContent = `1 USD = ${formatRate(rate)} ${code}`;
                }
            });
        }

        function convertCurrency() {
            const fromAmount = parseFloat(document.getElementById('fromAmount').value) || 0;
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;
            
            if (fromAmount === 0) {
                document.getElementById('toAmount').value = '';
                document.getElementById('rateValue').textContent = 'Enter amount to convert';
                return;
            }
            
            const rate = getExchangeRate(fromCurrency, toCurrency);
            const convertedAmount = fromAmount * rate;
            
            document.getElementById('toAmount').value = formatAmount(convertedAmount);
            document.getElementById('rateValue').textContent = 
                `1 ${fromCurrency} = ${formatRate(rate)} ${toCurrency}`;
            
            // Add to history
            addToHistory(fromAmount, fromCurrency, convertedAmount, toCurrency, rate);
        }

        function getExchangeRate(from, to) {
            if (from === to) return 1;
            
            // Convert through USD as base currency
            const fromRate = from === 'USD' ? 1 : (1 / exchangeRates[from]);
            const toRate = to === 'USD' ? 1 : exchangeRates[to];
            
            return fromRate * toRate;
        }

        function formatAmount(amount) {
            if (amount >= 1000000) {
                return amount.toExponential(2);
            }
            return amount.toFixed(2);
        }

        function formatRate(rate) {
            if (rate >= 1000) {
                return rate.toFixed(0);
            } else if (rate >= 1) {
                return rate.toFixed(4);
            } else {
                return rate.toFixed(6);
            }
        }

        function swapCurrencies() {
            const fromCurrency = document.getElementById('fromCurrency');
            const toCurrency = document.getElementById('toCurrency');
            const fromAmount = document.getElementById('fromAmount');
            const toAmount = document.getElementById('toAmount');
            
            // Swap currency selections
            const tempCurrency = fromCurrency.value;
            fromCurrency.value = toCurrency.value;
            toCurrency.value = tempCurrency;
            
            // Swap amounts
            const tempAmount = fromAmount.value;
            fromAmount.value = toAmount.value || '';
            
            // Trigger conversion
            convertCurrency();
        }

        function setAmount(amount) {
            document.getElementById('fromAmount').value = amount;
            convertCurrency();
        }

        function selectPopularCurrency(code) {
            const toCurrency = document.getElementById('toCurrency');
            toCurrency.value = code;
            convertCurrency();
        }

        function addToHistory(fromAmount, fromCurrency, toAmount, toCurrency, rate) {
            const conversion = {
                fromAmount,
                fromCurrency,
                toAmount,
                toCurrency,
                rate,
                timestamp: new Date().toISOString()
            };
            
            // Add to beginning of array
            conversionHistory.unshift(conversion);
            
            // Keep only last 10 conversions
            conversionHistory = conversionHistory.slice(0, 10);
            
            // Save to localStorage
            localStorage.setItem('conversionHistory', JSON.stringify(conversionHistory));
            
            // Update display
            updateHistoryDisplay();
        }

        function loadConversionHistory() {
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            const clearBtn = document.getElementById('clearHistoryBtn');
            
            if (conversionHistory.length === 0) {
                historyList.innerHTML = `
                    <div style="text-align: center; color: var(--text-muted); padding: 2rem;">
                        No conversions yet
                    </div>
                `;
                clearBtn.style.display = 'none';
                return;
            }
            
            historyList.innerHTML = '';
            clearBtn.style.display = 'block';
            
            conversionHistory.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const timeAgo = getTimeAgo(new Date(item.timestamp));
                
                historyItem.innerHTML = `
                    <div class="history-conversion">
                        ${formatAmount(item.fromAmount)} ${item.fromCurrency} = 
                        ${formatAmount(item.toAmount)} ${item.toCurrency}
                    </div>
                    <div class="history-time">${timeAgo}</div>
                `;
                
                historyList.appendChild(historyItem);
            });
        }

        function clearHistory() {
            conversionHistory = [];
            localStorage.removeItem('conversionHistory');
            updateHistoryDisplay();
        }

        function getTimeAgo(date) {
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            if (diffInSeconds < 60) return 'Just now';
            if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;
            if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`;
            return `${Math.floor(diffInSeconds / 86400)}d ago`;
        }

        async function updateHistoricalRates() {
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;
            const container = document.getElementById('historicalRates');
            
            // For demo purposes, we'll simulate historical data
            // In a real app, you'd fetch historical rates from an API
            const currentRate = getExchangeRate(fromCurrency, toCurrency);
            const periods = [
                { label: '1 Week Ago', rate: currentRate * (0.98 + Math.random() * 0.04) },
                { label: '1 Month Ago', rate: currentRate * (0.95 + Math.random() * 0.10) },
                { label: '3 Months Ago', rate: currentRate * (0.90 + Math.random() * 0.20) },
                { label: '6 Months Ago', rate: currentRate * (0.85 + Math.random() * 0.30) },
                { label: '1 Year Ago', rate: currentRate * (0.80 + Math.random() * 0.40) }
            ];
            
            container.innerHTML = '';
            
            periods.forEach(period => {
                const item = document.createElement('div');
                item.className = 'historical-rate-item';
                item.innerHTML = `
                    <div class="historical-rate-period">${period.label}</div>
                    <div class="historical-rate-value">${formatRate(period.rate)}</div>
                `;
                container.appendChild(item);
            });
        }

        function setupEventListeners() {
            const fromAmount = document.getElementById('fromAmount');
            const fromCurrency = document.getElementById('fromCurrency');
            const toCurrency = document.getElementById('toCurrency');
            
            fromAmount.addEventListener('input', convertCurrency);
            fromCurrency.addEventListener('change', () => {
                convertCurrency();
                updateHistoricalRates();
                updatePopularCurrencyRates();
            });
            toCurrency.addEventListener('change', () => {
                convertCurrency();
                updateHistoricalRates();
            });
            
            // Auto-refresh rates every 5 minutes
            setInterval(loadExchangeRates, 5 * 60 * 1000);
        }

        function showLoading(show) {
            const rateValue = document.getElementById('rateValue');
            if (show) {
                rateValue.innerHTML = '<span class="loading"></span> Loading rates...';
            }
        }

        function showError(message) {
            const errorElement = document.getElementById('errorMessage');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
            
            // Hide error after 10 seconds
            setTimeout(() => {
                errorElement.style.display = 'none';
            }, 10000);
        }

        function hideError() {
            const errorElement = document.getElementById('errorMessage');
            errorElement.style.display = 'none';
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.target.id === 'fromAmount') {
                convertCurrency();
            } else if (e.key === 'Tab' && e.shiftKey && e.target.id === 'fromCurrency') {
                e.preventDefault();
                swapCurrencies();
            }
        });

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ThemeManager();
            initializeCurrencyConverter();
        });

        // Handle online/offline status
        window.addEventListener('online', () => {
            loadExchangeRates();
        });

        window.addEventListener('offline', () => {
            showError('You are offline. Exchange rates may not be current.');
        });
    </script>
</body>
</html>


